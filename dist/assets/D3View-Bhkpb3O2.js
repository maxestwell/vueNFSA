import{d as A,u as B,b as I,w as U,s as g,l as E,m as S,e as k,f as V,g as q,_ as Y,o as v,c as y,a as C,h as j}from"./index-Dx2NlDE0.js";const x=Math.PI,D=2*x,f=1e-6,Z=D-f;function R(n){this._+=n[0];for(let t=1,e=n.length;t<e;++t)this._+=arguments[t]+n[t]}function z(n){let t=Math.floor(n);if(!(t>=0))throw new Error(`invalid digits: ${n}`);if(t>15)return R;const e=10**t;return function(i){this._+=i[0];for(let r=1,o=i.length;r<o;++r)this._+=Math.round(arguments[r]*e)/e+i[r]}}class Q{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?R:z(t)}moveTo(t,e){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,e){this._append`L${this._x1=+t},${this._y1=+e}`}quadraticCurveTo(t,e,i,r){this._append`Q${+t},${+e},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(t,e,i,r,o,c){this._append`C${+t},${+e},${+i},${+r},${this._x1=+o},${this._y1=+c}`}arcTo(t,e,i,r,o){if(t=+t,e=+e,i=+i,r=+r,o=+o,o<0)throw new Error(`negative radius: ${o}`);let c=this._x1,l=this._y1,a=i-t,h=r-e,s=c-t,u=l-e,p=s*s+u*u;if(this._x1===null)this._append`M${this._x1=t},${this._y1=e}`;else if(p>f)if(!(Math.abs(u*a-h*s)>f)||!o)this._append`L${this._x1=t},${this._y1=e}`;else{let d=i-c,m=r-l,w=a*a+h*h,P=d*d+m*m,M=Math.sqrt(w),b=Math.sqrt(p),L=o*Math.tan((x-Math.acos((w+p-P)/(2*M*b)))/2),$=L/b,T=L/M;Math.abs($-1)>f&&this._append`L${t+$*s},${e+$*u}`,this._append`A${o},${o},0,0,${+(u*d>s*m)},${this._x1=t+T*a},${this._y1=e+T*h}`}}arc(t,e,i,r,o,c){if(t=+t,e=+e,i=+i,c=!!c,i<0)throw new Error(`negative radius: ${i}`);let l=i*Math.cos(r),a=i*Math.sin(r),h=t+l,s=e+a,u=1^c,p=c?r-o:o-r;this._x1===null?this._append`M${h},${s}`:(Math.abs(this._x1-h)>f||Math.abs(this._y1-s)>f)&&this._append`L${h},${s}`,i&&(p<0&&(p=p%D+D),p>Z?this._append`A${i},${i},0,1,${u},${t-l},${e-a}A${i},${i},0,1,${u},${this._x1=h},${this._y1=s}`:p>f&&this._append`A${i},${i},0,${+(p>=x)},${u},${this._x1=t+i*Math.cos(o)},${this._y1=e+i*Math.sin(o)}`)}rect(t,e,i,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}}function _(n){return function(){return n}}function W(n){let t=3;return n.digits=function(e){if(!arguments.length)return t;if(e==null)t=null;else{const i=Math.floor(e);if(!(i>=0))throw new RangeError(`invalid digits: ${e}`);t=i}return n},()=>new Q(t)}function X(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function N(n){this._context=n}N.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,t){switch(n=+n,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,t):this._context.moveTo(n,t);break;case 1:this._point=2;default:this._context.lineTo(n,t);break}}};function F(n){return new N(n)}function G(n){return n[0]}function H(n){return n[1]}function J(n,t){var e=_(!0),i=null,r=F,o=null,c=W(l);n=typeof n=="function"?n:n===void 0?G:_(n),t=typeof t=="function"?t:t===void 0?H:_(t);function l(a){var h,s=(a=X(a)).length,u,p=!1,d;for(i==null&&(o=r(d=c())),h=0;h<=s;++h)!(h<s&&e(u=a[h],h,a))===p&&((p=!p)?o.lineStart():o.lineEnd()),p&&o.point(+n(u,h,a),+t(u,h,a));if(d)return o=null,d+""||null}return l.x=function(a){return arguments.length?(n=typeof a=="function"?a:_(+a),l):n},l.y=function(a){return arguments.length?(t=typeof a=="function"?a:_(+a),l):t},l.defined=function(a){return arguments.length?(e=typeof a=="function"?a:_(!!a),l):e},l.curve=function(a){return arguments.length?(r=a,i!=null&&(o=r(i)),l):r},l.context=function(a){return arguments.length?(a==null?i=o=null:o=r(i=a),l):i},l}const K=A({name:"D3Test",data(){return{parsedData:[],filteredItems:[],imgURL:"https://media.nfsacollection.net/"}},mounted(){const n=B(),t=I(()=>n.theStoredData);U(()=>n.theStoredData,()=>{console.log("Watcher has watched"),this.drawChart(t)}),this.drawChart(t)},methods:{drawChart(n){console.log("chart is charting");let t=n.value.filter(s=>s.productionDates&&s.productionDates[0].fromYear!==void 0&&s.id!==void 0);console.log(t),this.parsedData=t.map(s=>({date:s.productionDates[0].fromYear,value:s.id,imgURL:s.imgURL,result:s.result,title:s.title,summary:s.summary})),console.log(this.parsedData);const e={top:20,right:30,bottom:40,left:40},i=600-e.left-e.right,r=400-e.top-e.bottom;g(this.$refs.svg).selectAll("*").remove();const o=g(this.$refs.svg).attr("width",i+e.left+e.right).attr("height",r+e.top+e.bottom).append("g").attr("transform",`translate(${e.left},${e.top})`),c=E().domain([S(this.parsedData,s=>s.value),k(this.parsedData,s=>s.value)]).range([0,i]),l=E().domain([S(this.parsedData,s=>s.date),k(this.parsedData,s=>s.date)]).nice().range([r,0]),a=J().x(s=>c(s.value)).y(s=>l(s.date));o.append("path").datum(this.parsedData).attr("fill","none").attr("stroke","steelblue").attr("stroke-width",1.5).attr("d",a),o.append("g").attr("transform",`translate(0,${r})`).call(V(c).ticks(5)),o.append("g").call(q(l));const h=g(this.$refs.tooltip);o.selectAll(".dot").data(this.parsedData).enter().append("circle").attr("class","dot").attr("cx",s=>c(s.value)).attr("cy",s=>l(s.date)).attr("r",4).attr("fill","yellow").on("mouseover",(s,u)=>{h.transition().duration(200).style("opacity",.9),h.html(`
              <div>
                              <img src="${u.imgURL}" alt="Image" style="width: 50px; height: 50px;" />
                <p>Name: ${u.title}</p>
                <p>Date: ${u.date}</p>
                <p>Summary: ${u.summary}</p>
              </div>
            `).style("left",s.pageX+5+"px").style("top",s.pageY-28+"px")}).on("mouseout",()=>{h.transition().duration(500).style("opacity",0)})}}}),O={ref:"svg"},tt={ref:"tooltip",class:"tooltip",style:{opacity:"0"}};function et(n,t,e,i,r,o){return v(),y("div",null,[t[0]||(t[0]=C("h2",null,"Vue.js and D3 Chart",-1)),(v(),y("svg",O,null,512)),C("div",tt,null,512)])}const nt=Y(K,[["render",et],["__scopeId","data-v-679df65a"]]),st=A({__name:"D3View",setup(n){return(t,e)=>(v(),y("main",null,[j(nt)]))}});export{st as default};
